.row.tab-spacer
  form.form(name='findUserForm', ng-submit='$ctrl.searchUsers(findUserForm)', novalidate='', ng-model-options="{'updateOn': 'default blur', 'debounce': {'default': 200, 'blur': 0}}")
    .col-xs-9(style='max-width:415px;')
      .form-group
        label.sr-only Find User
        .input-group
          input.form-control(name='filterField', id='filterField', type='search', ng-model='$ctrl.filterField', ng-minlength='3', required='', autofocus='', placeholder="First or last name")
          span.input-group-btn
            button.btn.btn-primary(id='submitButton', type='submit')
              span.glyphicon.glyphicon-search 
              |&nbsp;Search
    .col-xs-3
      a.btn.btn-warning(ng-click='$ctrl.createUser()') 
        span.glyphicon.glyphicon-plus-sign 
        |&nbsp;New User
  p.help-block.has-error(ng-show='findUserForm.filterField.$invalid && $ctrl.submitted')
        | Please enter at least the first three characters of the user's first or last name
        
.row
  .col-md-12
    p(ng-show='$ctrl.users.length==0') No users found meeting the search criteria.
    table.table.table-striped(ng-hide='$ctrl.users.length==0')
      thead
        th(ng-click="$ctrl.sortUsers('lastName')") Name (click to edit)
          span.glyphicon.sort-icon(ng-show="$ctrl.sortKey=='lastName'", ng-class="{'glyphicon-chevron-up':$ctrl.reverse,'glyphicon-chevron-down':!$ctrl.reverse}")
        th(ng-hide='$ctrl.mini', ng-click="$ctrl.sortUsers('email')") Email 
          span.glyphicon.sort-icon(ng-show="$ctrl.sortKey=='email'", ng-class="{'glyphicon-chevron-up':$ctrl.reverse,'glyphicon-chevron-down':!$ctrl.reverse}")
        th(ng-hide='$ctrl.mini', ng-click="$ctrl.sortUsers('phone')") Phone 
          span.glyphicon.sort-icon(ng-show="$ctrl.sortKey=='phone'", ng-class="{'glyphicon-chevron-up':$ctrl.reverse,'glyphicon-chevron-down':!$ctrl.reverse}")
        th Classes
        th(style='text-align:right;') Action
      tbody
        tr(dir-paginate='user in $ctrl.users|orderBy:$ctrl.sortKey:$ctrl.reverse|itemsPerPage:8')
          td
            a.edit(ng-click="$ctrl.editUser(user)")
              span.glyphicon.glyphicon-new-window 
              |&nbsp;&nbsp;{{ user.lastName }}, {{ user.firstName }}
          td(ng-hide='$ctrl.mini')
            a(href='mailto:{{ user.email }}')
              span.glyphicon.glyphicon-envelope
              |&nbsp;&nbsp;{{ user.email }} ({{ user.provider }})
          td(ng-hide='$ctrl.mini')
            a(href='tel:{{ user.phone }}')
              span.glyphicon.glyphicon-phone
              |&nbsp;&nbsp;{{ user.phone }}
          td
            span.glyphicon.glyphicon-list-alt
            | &nbsp;&nbsp;{{ user.balance }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            a.edit(ng-click="$ctrl.addClasses(user)")
              span.glyphicon.glyphicon-plus-sign
          td
            span.glyphicon.glyphicon-hand-right.pull-right(ng-hide='!$ctrl.mini')
            | &nbsp; 
            a.trash(ng-hide='$ctrl.mini', ng-click='$ctrl.deleteUser(user)')
              span.glyphicon.glyphicon-trash.pull-right 
    dir-pagination-controls(max-size='5', direction-links='true', boundary-links='true')

.row(ng-show='$ctrl.historyItems.length==0')
  .col-md-12
    p History for USER NAME
    table.table.table-striped(ng-hide='$ctrl.historyItems.length==0')
      thead
        th Date
        th Description 
        th Qty
        th Balance
        th &nbsp;
      tbody
        tr(dir-paginate='historyItem in $ctrl.historyItems|orderBy:$ctrl.historyItems.Date|itemsPerPage:8')
          td
            a.edit(ng-click="$ctrl.editHistoryItem(historyItem)")
              span.glyphicon.glyphicon-new-window
              |&nbsp;&nbsp;{{ historyItem.date }}
          td {{ historyItem.description }}
          td {{ historyItem.quantity }}
          td {{ historyItem.balance }}
          td
            a.trash(ng-click='$ctrl.editHistoryItem(historyItem)')
              span.glyphicon.glyphicon-trash.pull-right